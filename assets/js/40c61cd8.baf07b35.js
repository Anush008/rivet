"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4810],{1042:(e,r,n)=>{n.d(r,{Zo:()=>p,kt:()=>f});var t=n(3249);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function c(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=t.createContext({}),s=function(e){var r=t.useContext(l),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},p=function(e){var r=s(e.components);return t.createElement(l.Provider,{value:r},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},g=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=s(n),g=o,f=d["".concat(l,".").concat(g)]||d[g]||u[g]||a;return n?t.createElement(f,i(i({ref:r},p),{},{components:n})):t.createElement(f,i({ref:r},p))}));function f(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=g;var c={};for(var l in r)hasOwnProperty.call(r,l)&&(c[l]=r[l]);c.originalType=e,c[d]="string"==typeof e?e:o,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}g.displayName="MDXCreateElement"},1582:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>s});var t=n(7396),o=(n(3249),n(1042));const a={},i="Recording",c={unversionedId:"api-reference/recording",id:"api-reference/recording",title:"Recording",description:"Enabling recording of your rivet graph executions is simple and straightforward.",source:"@site/docs/api-reference/recording.md",sourceDirName:"api-reference",slug:"/api-reference/recording",permalink:"/docs/api-reference/recording",draft:!1,editUrl:"https://github.com/ironclad/rivet/tree/main/packages/docs/docs/api-reference/recording.md",tags:[],version:"current",frontMatter:{}},l={},s=[{value:"Recording Format",id:"recording-format",level:2}],p={toc:s},d="wrapper";function u(e){let{components:r,...n}=e;return(0,o.kt)(d,(0,t.Z)({},p,n,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"recording"},"Recording"),(0,o.kt)("p",null,"Enabling recording of your rivet graph executions is simple and straightforward."),(0,o.kt)("p",null,"First, instantiate a new ",(0,o.kt)("inlineCode",{parentName:"p"},"ExecutionRecorder")," instance:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const recorder = new ExecutionRecorder(options);\n")),(0,o.kt)("p",null,'You can optionally pass in an options object to choose whether to include partial outputs (streaming responses, default true), and whether to include debugging "trace" events (default true). Both options will increase the file size of your recordings.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"export type ExecutionRecorderOptions = {\n  includePartialOutputs?: boolean;\n  includeTrace?: boolean;\n};\n")),(0,o.kt)("p",null,"Next, call ",(0,o.kt)("inlineCode",{parentName:"p"},"recorder.record()")," on your ",(0,o.kt)("inlineCode",{parentName:"p"},"GraphProcessor")," instance. You will have to use ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/node/createProcessor"},"createProcessor")," rather than ",(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/node/runGraph"},"runGraph")," to get a ",(0,o.kt)("inlineCode",{parentName:"p"},"GraphProcessor")," instance."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const processor = createProcessor({ etc });\nrecorder.record(processor);\n")),(0,o.kt)("p",null,"Once the processor has finished executing, you can call ",(0,o.kt)("inlineCode",{parentName:"p"},"recorder.getRecording()")," to get a ",(0,o.kt)("inlineCode",{parentName:"p"},"Recording")," object, or more simply, you can call ",(0,o.kt)("inlineCode",{parentName:"p"},"recorder.serialize()")," to get a string serialized recording. You can then save your recording to a file, or any other storage medium:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const serializedRecording = recorder.serialize();\nawait writeFile('my-recording.rivet-recording', serializedRecording, { encoding: 'utf8' });\n")),(0,o.kt)("h2",{id:"recording-format"},"Recording Format"),(0,o.kt)("p",null,"The recording format is subject to change. However, at the moment the recording format is a JSONL file, where each line is a JSON object representing a single event in the recording."),(0,o.kt)("p",null,"When replaying a recording, a ",(0,o.kt)("inlineCode",{parentName:"p"},"GraphProcessor")," simply replays every event in the recording as if it were running and emitting events itself."))}u.isMDXComponent=!0}}]);